<html>  <head>    <script language="JavaScript">      function pageLoaded() {         // see whether the main page has loaded before or not already         var pageLoadedElem = document.getElementById("isPageLoaded");         // when the user is going backwards, when they hit the original first page Safari         // incorrectly completely reloads the page, making it look like a false programmatic         // change; to get around this we save into a hidden form field when the page is loaded         // for the first time that the page has been loaded	         if (window.parent.programmaticChange == false || pageLoadedElem.value == "true") {           // extract the new location out of the URL           var newLocation = getCurrentLocation();           // notify any listeners of this history change           window.parent.historyLoaded(newLocation);         }         else {           // this was a programmatic change; reset it           window.parent.programmaticChange = false;         }      }      function getCurrentLocation() {         var newLocation = window.location.href.match(/historyLocation=(.*)$/);         if (newLocation == null) { // at initial page           newLocation = "";         }         else {           newLocation = newLocation[1];         }         return newLocation;       }    </script>  </head>  <body onload="pageLoaded()">    <form id="historyForm" method="GET">      <input type="text" id="isPageLoaded" name="isPageLoaded">      <input type="text" id="haveHistory" name="haveHistory">      <textarea id="historyLocation" name="historyLocation"></textarea>    </form>  </body></html>